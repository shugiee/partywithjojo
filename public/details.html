<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Jordyn and Jonathan's Wedding - Event Details</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta charset="UTF-8">
		<meta name="description" content="Details page for Jordyn Levy and Jonathan Olson's wedding in 2025.">
	</head>
	<body>
        <a href="./details">Event Details</a>
        <a href="./home">Home</a>
        <a href="./accommodations">Accommodations</a>
        <a href="./registry">Registry</a>
        <a href="./faq">FAQs</a>
        <a href="./rsvp">RSVP</a>
        <h1>Event Details</h1>
        <iframe
            width="600"
            height="450"
            style="border:0"
            loading="lazy"
            allowfullscreen
            referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps/embed/v1/place?key=AIzaSyCDhUx8u5JVTNSRwPlDqJT3GMxoiUSkhaE&q=Beacon+Grand,San+Francisco+CA">
        </iframe>
        <script>
            const searchSpotify = async (spotifyToken, text) => {
                const params = new URLSearchParams();
                params.append("q", text);
                params.append("type", "track");
                try {
                    const spotifyResponse = await fetch(`https://api.spotify.com/v1/search?${params}`, {
                        method: "GET",
                        headers: {
                            "Authorization": `Bearer ${spotifyToken}`
                        },
                    });

                    if (!spotifyResponse.ok) {
                        throw new Error(`Response status: ${spotifyResponse.status}`);
                    }

                    const json = await spotifyResponse.json();
                    console.log("Spotify response", json);
                    return json;
                } catch (error) {
                    console.error("JOnathan error", error.message);
                    return null;
                }
            };
            function getCookie(name) {
                return Object.fromEntries(
                    document.cookie
                    .split('; ')
                    .map(cookie => cookie.split('='))
                )[name] || null;
            };
            
            const spotifyToken = getCookie("spotify");
            console.log("Spotify token", spotifyToken);
            const spotifyResponse = searchSpotify(spotifyToken, "muse");
        </script>
    </body>
</html>
